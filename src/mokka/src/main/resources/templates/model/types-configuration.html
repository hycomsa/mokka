<md-dialog aria-label="Configure types">
  <form>
    <md-toolbar>
      <div class="md-toolbar-tools">
        <h2>Configure types</h2>
        <span flex=""></span>
        <md-button class="md-icon-button" ng-click="cancel()">
          <ng-md-icon icon="close" style="fill: #fff" aria-label="Close dialog"></ng-md-icon>
        </md-button>
      </div>
    </md-toolbar>
    <md-dialog-content>
		<div class="md-dialog-content">
			
			<md-button class="md-raised md-primary" ng-click="showAddNewDefinition = !showAddNewDefinition">Add new definition</md-button>
			
			<div ng-if="showAddNewDefinition">
				<md-input-container>
			    	<label>Name</label>
					<input ng-model="newDefinition.name"/>
				</md-input-container>
				<ul>
					<li ng-repeat="field in newDefinition.fields">
				    	<md-input-container>
					    	<label>Field name</label>
							<input ng-model="field.name"/>
						</md-input-container>
						<br />						
						<md-input-container>
					    	<label>Relation to</label>
					    	<md-select ng-model="field.relationTo">
					          <md-option ng-repeat="thingType in thingTypes" value="{{thingType.id}}">
					            {{thingType.name}}
					          </md-option>
					        </md-select>							
						</md-input-container>
						<md-switch ng-model="field.collection" aria-label="Is collection">
				    		<label>Is collection</label>							    
						</md-switch>						
					</li>
				</ul>
				<md-button class="md-raised" ng-click="newDefinition.fields.push({})">Add field</md-button>
				<md-button class="md-raised" ng-click="addThingType()">Save</md-button>				
			</div>
			
			<md-divider style="margin-top:20px;"></md-divider>
			
			<md-list flex="">
		        <md-list-item class="md-3-line" ng-repeat="thingType in thingTypes">
		        	<div class="md-list-item-text" layout="column">
		            	<h3>
		            		{{ thingType.name }}
		            	</h3>
		            	<ul>
		            		<li ng-repeat="field in thingType.fields">
		            			{{ field.name }}
		            			{{ field.collection }}
		            			{{ field.relationTo }}
		            		</li>		            	
		            	</ul>
		          	</div>
			        <md-divider ></md-divider>		       
		        </md-list-item>
		    </md-list>
		</div>
    </md-dialog-content>    
  </form>
</md-dialog>

